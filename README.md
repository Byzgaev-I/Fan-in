# Fan-in


## Описание задания
Вам необходимо реализовать эмулятор системы мониторинга производительности, которая собирает метрики от трёх независимых источников данных и объединяет их в единый поток для дальнейшей обработки.   

Система должна включать:  

Три функции-генератора метрик, каждая из которых эмулирует различный источник данных.  
Функцию fanIn, которая объединяет все источники в один канал.  
Главную функцию, которая обрабатывает объединённый поток данных.  
 
Структура метрики:  

type Metric struct {
Source string // название источника: строго “CPU”, “Memory” или "Network"
Value float64 // значение метрики (случайное число в определенном диапазоне)
Time time.Time // время создания метрики (time.Now())
}

### Инструкция к выполнению  

Создайте структуру Metric с тремя полями: Source (string), Value (float64) и Time (time.Time).

Реализуйте три функции-генератора эмуляторов метрик:

### cpuMetrics() <-chan Metric
o Эмулирует метрики загрузки процессора
o Генерирует ровно 5 метрик с интервалом 800 миллисекунд между отправками
o Source должно быть строго «CPU»
o Value должно быть случайным числом от 0 до 100 (процент загрузки)
o Time должно быть текущим временем (time.Now())

### memoryMetrics() <-chan Metric  
o Эмулирует метрики использования памяти  
o Генерирует ровно 5 метрик с интервалом 1200 миллисекунд между отправками  
o Source должно быть строго «Memory»  
o Value должно быть случайным числом от 0 до 16384 (использование памяти в мегабайтах)  
o Time должно быть текущим временем (time.Now())  

### networkMetrics() <-chan Metric  
o Эмулирует метрики сетевой активности  
o Генерирует ровно 5 метрик с интервалом 1500 миллисекунд между отправками  
o Source должно быть строго «Network»  
o Value должно быть случайным числом от 0 до 1000 (пропускная способность в мегабитах в секунду)  
o Time должно быть текущим временем (time.Now())   

### Требования к каждому генератору:
· Создать небуферизованный канал типа chan Metric
· Запустить горутину, которая будет отправлять метрики в канал
· Использовать math/rand.Float64() для генерации случайных значений
· Использовать time.Sleep() для создания интервалов между отправками
· Обязательно закрыть канал с помощью defer close(ch) после отправки всех метрик
· Вернуть канал только для чтения (<-chan Metric)

### Реализуйте функцию fanIn(channels …<-chan Metric) <-chan Metric:
· Принимает переменное количество каналов-источников (только для чтения)
· Создаёт один выходной канал типа chan Metric
· Для каждого входного канала запускает отдельную горутину
· Каждая горутина копирует все значения из своего входного канала в общий выходной канал
· Использует sync.WaitGroup для подсчета активных горутин
· После завершения всех горутин закрывает выходной канал
· Возвращает канал только для чтения (<-chan Metric)

### Обязательная последовательность в fanIn:
· Создать выходной канал
· Создать sync.WaitGroup
· Для каждого входного канала: вызвать wg.Add(1) и запустить горутину
· В каждой горутине: использовать defer wg.Done() и цикл for range для копирования
· Запустить отдельную горутину, которая ждёт wg.Wait() и затем закрывает выходной канал

### В функции main():
· Инициализировать генератор случайных чисел: rand.Seed(time.Now().UnixNano())
· Вывести сообщение о запуске системы мониторинга
· Создать три канала, вызвав cpuMetrics(), memoryMetrics(), networkMetrics()
· Передать все три канала в функцию fanIn
· Получить объединённый канал от fanIn
· В цикле for metric := range объединённый канал прочитать все метрики
· Вывести каждую метрику в точном формате: «Источник: [Source], Значение: [Value], Время: [Time]»
· После завершения цикла вывести сообщение о завершении мониторинга

### Проверьте корректность работы:
· Программа должна вывести ровно 15 метрик (5 от CPU + 5 от Memory + 5 от Network)
· Программа должна завершиться автоматически без зависаний
· Метрики могут выводиться в любом порядке (это особенность параллельной обработки)
· Не должно быть ошибок типа «deadlock» или «panic»

### Ожидаемый результат работы программы:
Запуск системы мониторинга…
Источник: CPU, Значение: 45.67, Время: 15:30:15.123
Источник: Memory, Значение: 8192.34, Время: 15:30:15.456
Источник: Network, Значение: 567.89, Время: 15:30:15.789
… (еще 12 метрик в произвольном порядке)
Мониторинг завершен.

Прикрепите файл main.go с кодом программы и нажмите «Отправить на проверку». Перед отправкой домашнего задания вы можете написать комментарий эксперту.

Критерии оценки домашнего задания
«Зачёт»
· Реализовали все требуемые функции точно согласно спецификации
· Программа выводит ровно 15 метрик от всех трёх источников
· Программа корректно завершается без зависаний и ошибок
· Код содержит осмысленные комментарии к ключевым участкам
· Проведено тестирование программы командой go run main.go
· Имена источников метрик точно соответствуют требованиям: «CPU», «Memory», «Network»
· Диапазоны значений метрик соответствуют указанным











